{% extends 'administracion.html' %}
{% block titulo %}Administrar proyecto{% endblock %}
{% block encabezado %}Lista de proyectos <small>Haz click en opciones para interactuar con un proyecto</small>{% endblock %}

{% block botones %}
    <li>
        {% if usuario_actor.can_add_proyecto %}
            <a href="/administracion/proyectos/nuevo" class="btn btn-default">Crear Proyecto</a>
        {% endif %}
        <a href="/administracion" class="btn btn-default">Volver</a>
    </li>
{% endblock %}

{% block contenido %}
    <table class="table table-striped">
        <thead>
            <tr>
                <td>Nombre</td>
                <td>Lider</td>
                <td>Estado</td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </thead>
        <tbody>
            {% for proyecto in lista_proyectos %}
                <tr>
                    <td>{{ proyecto.Nombre }}</td>
                    <td>{{ proyecto.Lider }}</td>
                    <td>{{ proyecto.get_Estado_display }}</td>
                    <td>
                        <div class="btn-group">
                            <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
                                Opciones <span class="caret"></span>
                            </button>
                            <ul class="dropdown-menu">
                                <li><a href="{% url 'administracion.views.detalle_proyecto' proyecto.id %}">Detalles</a></li>
                                <li><a href="{% url 'administracion.views.modificar_proyecto' proyecto.id %}">Modificar</a></li>
                                {% if usuario_actor == proyecto.Lider %}
                                    <li class="divider"></li>
                                    <li><a href="{% url 'administracion.views.confirmar_iniciar_proyecto' proyecto.id %}">Iniciar</a></li>
                                {% endif %}
                            </ul>
                        </div>
                    </td>
                    {% if usuario_actor == proyecto.Lider %}
                        <td>
                            <a href="{% url 'administracion.views.administrar_fases' proyecto.id %}" class="btn btn-primary">Fases</a>
                        </td>
                        <td>
                            <a href="{% url 'administracion.views.confirmar_eliminar_proyecto' proyecto.id %}" type="button" class="btn btn-danger">Eliminar</a>
                        </td>
                    {% else %}
                        <td></td>
                        <td></td>
                    {% endif %}
                </tr>
            {% empty %}
                <tr class="warning">
                <td>No hay proyectos disponibles</td><td></td><td></td><td></td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
    {% block mensaje %}{% endblock %}
{% endblock %}